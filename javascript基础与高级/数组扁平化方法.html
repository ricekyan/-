<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
        处理数组扁平化的几种方法  查看代码
    <script>
        
        // 1.reduce
        // 遍历数组每一项，若值为数组则递归遍历，否则concat。
        var arr = [1, [2, [3, 4]]];
        // flatten(arr);//[1,2,3,4]
        // 1.循环+递归
        // function flatten(arr) {
        //     var result = [];
        //     for (var i = 0; i < arr.length; i++) {
        //         if (Array.isArray(arr[i])) {
        //             result = result.concat(flatten(arr[i]));//注意
        //         } else {
        //             result.push(arr[i]);
        //         }
        //     }
        //     return result;
        // }
        // console.log(flatten(arr));



        // 2.归并方法：reduce
        // 遍历数组每一项，若值为数组则递归遍历，否则concat
        // reduce是数组的一种方法，它接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。
        // function flatten(arr) {
        //     return arr.reduce(function (prev, next) {
        //         // console.log(prev);
        //         return prev.concat(Array.isArray(next) ? flatten(next) : next);
        //     }, []);//reduce的第二个参数：作为归并基础的初始值
        // }  
        // console.log(flatten(arr));   



        // 3.toString & split
        // 调用数组的toString方法，将数组变为字符串然后再用split分割还原为数组
        // 因为split分割后形成的数组的每一项值为字符串，所以需要用一个map方法遍历数组将其每一项转换为数值型
        // function flatten(arr) {
        //     return arr.toString().split(',').map(function (item) {
        //         return Number(item);
        //     })
        // } 
        // console.log(flatten(arr));



        // 4. join & split
        // 和上面的toString一样，join也可以将数组转换为字符串
        // function flatten(arr) {
        //     return arr.join(',').split(',').map(function (item) {
        //         return parseInt(item);
        //     })
        // }
        // console.log(flatten(arr));

       
       
        // 5.扩展运算符
        // es6的扩展运算符能将二维数组变为一维
        // [].concat(...[1, 2, 3, [4, 5]]);  // [1, 2, 3, 4, 5]
        // 根据这个结果我们可以做一个遍历，若arr中含有数组则使用一次扩展运算符，直至没有为止。
        // function flatten(arr) {
        //     while (arr.some(item => Array.isArray(item))) {
        //         arr = [].concat(...arr);
        //     }
        //     return arr;
        // }
        // console.log(flatten(arr));
    </script>
</body>

</html>